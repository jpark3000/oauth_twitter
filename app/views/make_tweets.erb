<div class="container">
  <h1>Enter a tweet to tweet, <%= @name %></h1>

  <form id="tweet-form" action='/tweet' method='post'>
    <input id='tweet_input' type='text' name='tweet'>
    <input type='submit' value='submit'>
  </form>

  <br><br><div id='tweets'></div>


  <script>
    $('#tweet-form').submit(function(event) {
      // event.preventDefault();
      var tweet_data = $("#tweet-form").serialize();

      $('#tweet-form input').prop('disabled', true);
      $('#tweet-form submit').prop('disabled', true);
      $('#tweets').html('<img src="ajax-loader.gif">');

      $.post('/tweet', tweet_data, function(data) {
        $('#tweets').html(data);
        $('#tweet-form input').prop('disabled', false);
        $('#tweet-form submit').prop('disabled', false);
        $('#tweet_input').val("");
      });
      return false;
    });
  </script>

</div>
